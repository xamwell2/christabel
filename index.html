<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To My Christabel ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Satisfy&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            background: linear-gradient(135deg, #fff0f5, #ffe4e1, #ffb6c1);
            background-size: 400% 400%;
            animation: grad 35s ease infinite;
            contain: strict;
        }
        @keyframes grad { 0%,100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }

        .hero { position: relative; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .container {
            text-align: center; padding: 60px 40px; background: rgba(255,255,255,0.22); border-radius: 50px;
            backdrop-filter: blur(25px); box-shadow: 0 25px 70px rgba(0,0,0,0.3); max-width: 90%; z-index: 20;
            animation: flyIn 2.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards 0.5s, heartbeat 4s ease-in-out infinite 4s;
            opacity: 0; transform: translateY(-100vh) scale(0.6); will-change: transform, opacity;
        }
        @keyframes flyIn { to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes heartbeat { 0%,100% { transform: scale(1); } 50% { transform: scale(1.03); } }

        h1 { font-family: 'Great Vibes', cursive; font-size: 4.2em; color: #ff4081; animation: handWrite 2s steps(30) forwards 1.5s; opacity: 0; overflow: hidden; white-space: nowrap; width: 0; }
        .name { font-family: 'Dancing Script', cursive; font-size: 5.5em; color: #ff1744; animation: handWrite 2.5s steps(30) forwards 2.2s; opacity: 0; overflow: hidden; white-space: nowrap; width: 0; }
        p { font-family: 'Satisfy', cursive; font-size: 2.1em; color: #fff; line-height: 1.8; max-width: 800px; margin: 35px auto; animation: handWrite 3.5s steps(50) forwards 3.2s; opacity: 0; overflow: hidden; white-space: nowrap; width: 0; text-shadow: 1px 1px 4px rgba(0,0,0,0.4); }
        @keyframes handWrite { to { width: 100%; opacity: 1; } }

        .heart { font-size: 8em; margin: 40px 0; animation: cartoonBeat 1.8s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite 5s; opacity: 1; cursor: pointer; }
        @keyframes cartoonBeat { 0%,100% { transform: scale(1) rotate(0); } 30% { transform: scale(1.35) rotate(8deg); } 60% { transform: scale(1.15) rotate(-8deg); } }

        .parallax-layer {
            position: fixed; inset: 0; pointer-events: none; will-change: transform;
            transform: translate3d(0,0,0); contain: strict;
        }
        #far { z-index: 2; } #mid { z-index: 5; } #near { z-index: 8; }
        .particle { position: absolute; will-change: transform, opacity; pointer-events: none; }

        @keyframes cartoonFloat { 0% { transform: translateY(120vh) scale(0.7) rotate(0); opacity: 0; } 50% { transform: translateY(0) scale(1.3) rotate(30deg); opacity: 1; } 100% { transform: translateY(-120vh) scale(0.7) rotate(-30deg); opacity: 0; } }
        @keyframes cartoonTwinkle { 0%,100% { opacity: 0; transform: scale(0) rotate(0); } 40% { opacity: 1; transform: scale(1.6) rotate(360deg); } }
        @keyframes cartoonFall { 0% { transform: translateY(-120vh) scale(0.7) rotate(0); opacity: 0; } 50% { transform: translateY(0) scale(1.3) rotate(720deg); opacity: 1; } 100% { transform: translateY(120vh) scale(0.7) rotate(1440deg); opacity: 0; } }

        .content-section {
            min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 60px 20px; text-align: center; color: white; font-family: 'Satisfy', cursive; font-size: 2.2em;
            background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); opacity: 0; transition: opacity 1.5s ease;
        }
        .content-section.visible { opacity: 1; }

        .photo-gallery { display: flex; flex-wrap: wrap; gap: 50px; justify-content: center; margin: 60px 0; }
        .polaroid {
            background: white; padding: 20px 20px 45px; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            max-width: 400px; opacity: 0; transform: scale(0) rotate(-5deg); transition: transform 0.5s ease;
            border: 8px solid #fff0f5; position: relative;
        }
        .polaroid::before { content: 'üíï'; position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 2em; }
        .polaroid.visible { opacity: 1; transform: scale(1) rotate(0); animation: popIn 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; }
        @keyframes popIn { 0% { transform: scale(0); } 70% { transform: scale(1.2); } 100% { transform: scale(1); } }
        .polaroid img { width: 100%; border-radius: 10px; loading: lazy; }
        .polaroid-caption { font-size: 2em; color: #ff1744; margin-top: 15px; }
        .polaroid:hover { transform: scale(1.08) !important; z-index: 10; }

        #musicControls {
            position: fixed; bottom: 30px; right: 30px; background: rgba(255,255,255,0.35); border-radius: 70px;
            padding: 20px 30px; backdrop-filter: blur(20px); box-shadow: 0 15px 40px rgba(0,0,0,0.25); z-index: 100;
            display: flex; align-items: center; gap: 25px; animation: bounce 3s ease-in-out infinite;
        }
        @keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        #musicToggle { font-size: 2.8em; cursor: pointer; transition: 0.4s; }
        #musicToggle:hover { transform: scale(1.3) rotate(360deg); }
        #volumeContainer { height: 130px; opacity: 0; width: 0; overflow: hidden; transition: 0.7s cubic-bezier(0.68, -0.55, 0.27, 1.55); display: flex; align-items: center; }
        .visible { opacity: 1 !important; width: 80px !important; }
        #volumeSlider { -webkit-appearance: slider-vertical; writing-mode: bt-lr; width: 12px; height: 130px; background: rgba(255,255,255,0.4); border-radius: 20px; outline: none; }
        #volumeSlider::-webkit-slider-thumb { -webkit-appearance: none; width: 28px; height: 28px; background: #fff; border: 4px solid #ff4081; border-radius: 50%; box-shadow: 0 0 25px rgba(255,64,129,0.8); }
    </style>
</head>
<body>
    <!-- Silent iframe for autoplay permission -->
    <iframe src="https://olafwempe.com/mp3/silence/silence.mp3" allow="autoplay" style="display:none"></iframe>

    <audio id="bgMusic" loop preload="auto">
        <source src="./audio/Elley_Duh MIDDLE_OF_THE_NIGHT.mp3" type="audio/mpeg">
    </audio>

    <div id="musicControls">
        <div id="musicToggle">üéµ</div>
        <div id="volumeContainer"><input type="range" id="volumeSlider" min="0" max="100" value="60"></div>
    </div>

    <section class="hero">
        <div class="parallax-layer" id="far"></div>
        <div class="parallax-layer" id="mid"></div>
        <div class="parallax-layer" id="near"></div>

        <div class="container">
            <h1>My Eternal Love</h1>
            <div class="name">Christabel</div>
            <p>I love you.<br>I hope you know that I truly love you<br>and want to do right by you ‚Äî<br>with my actions and my words,<br>every single day, forever.</p>
            <div class="heart">‚ù§Ô∏è</div>
        </div>
    </section>

    <section class="content-section">
        <p>And here you are...<br>My beautiful Christabel üåπ</p>
        <div class="photo-gallery">
            <div class="polaroid">
                <img src="./imgs/christabel-red-roses.jpg" alt="Christabel with red roses" loading="lazy">
                <div class="polaroid-caption">My Queen ‚ù§Ô∏è</div>
            </div>
            <div class="polaroid">
                <img src="./imgs/christabel-white-roses.jpg" alt="Beautiful white roses" loading="lazy">
                <div class="polaroid-caption">Forever Yours üíï</div>
            </div>
        </div>
    </section>

    <section class="content-section">
        <p>Scroll down slowly...<br>to feel how deep my love is.<br>üíï Forever yours üíï</p>
    </section>

    <section class="content-section">
        <p>I pushed you away...<br>without talking<br>üíïI don't know what to sayüíï</p>
    </section>

    <section class="content-section">
        <p>Hope to <br>see you in the<br>near future if possible.</p>
    </section>

    <section class="content-section">
        <p>If this is goodbye...<br>I'm good with it<br>we will all be ok in the end.</p>
    </section>

    <script>
        const audio = document.getElementById('bgMusic');
        const toggle = document.getElementById('musicToggle');
        const volCont = document.getElementById('volumeContainer');
        const slider = document.getElementById('volumeSlider');
        const layers = { far: document.getElementById('far'), mid: document.getElementById('mid'), near: document.getElementById('near') };

        let playing = false;
        audio.volume = 0.6;
        audio.play().catch(() => {});

        toggle.onclick = () => {
            playing = !playing;
            if (playing) { audio.play(); toggle.innerHTML = 'üîá'; volCont.classList.add('visible'); }
            else { audio.pause(); toggle.innerHTML = 'üéµ'; volCont.classList.remove('visible'); }
        };
        slider.oninput = () => audio.volume = slider.value / 100;

        // Super smooth parallax
        let scrollY = 0, ticking = false;
        function update() {
            layers.far.style.transform = `translate3d(0, ${scrollY * 0.12}px, 0)`;
            layers.mid.style.transform = `translate3d(0, ${scrollY * 0.35}px, 0)`;
            layers.near.style.transform = `translate3d(0, ${scrollY * 0.65}px, 0)`;
            ticking = false;
        }
        window.addEventListener('scroll', () => {
            scrollY = window.scrollY;
            if (!ticking) { requestAnimationFrame(update); ticking = true; }
        }, { passive: true });

        // Optimized cartoon particles
        const emojis = { s: ['‚ú®','‚≠ê','üí´'], h: ['‚ù§Ô∏è','üíñ','üíï','ü©∑','üíó'], p: ['üå∏','ü•Ä','üå∫'] };
        const create = (layer, arr, min, max, anim) => {
            const el = document.createElement('div');
            el.className = 'particle';
            el.innerText = arr[Math.floor(Math.random()*arr.length)];
            const size = Math.random()*(max-min)+min;
            el.style.fontSize = `${size}px`;
            el.style.left = `${Math.random()*100}vw`;
            el.style.animation = `${anim} ${Math.random()*5+7}s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards`;
            layer.appendChild(el);
            setTimeout(() => el.remove(), 15000);
        };

        setInterval(() => create(layers.far, emojis.s, 12, 28, 'cartoonTwinkle'), 1100);
        setInterval(() => create(layers.mid, emojis.h, 28, 55, 'cartoonFloat'), 900);
        setInterval(() => create(layers.near, emojis.p, 22, 45, 'cartoonFall'), 1300);

        // Section & photo reveal
        const sections = document.querySelectorAll('.content-section');
        const polaroids = document.querySelectorAll('.polaroid');
        window.addEventListener('scroll', () => {
            sections.forEach(sec => { if (sec.getBoundingClientRect().top < window.innerHeight * 0.8) sec.classList.add('visible'); });
            if (scrollY > 400) polaroids.forEach((p,i) => setTimeout(() => p.classList.add('visible'), i*500));
        });
    </script>
</body>
</html>